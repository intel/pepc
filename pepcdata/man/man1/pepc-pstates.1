.\" Automatically generated by Pandoc 3.6.4
.\"
.TH "CPU P\-states" "" "" ""
.SH Command \f[I]\[aq]pstates\[aq]\f[R]
.SS General options
.TP
\f[B]\-h\f[R]
Show a short help message and exit.
.TP
\f[B]\-q\f[R]
Be quiet (print only important messages like warnings).
.TP
\f[B]\-d\f[R]
Print debugging information.
.TP
\f[B]\-\-debug\-modules\f[R] \f[I]MODNAME[,MODNAME1,...]\f[R]
While the \[aq]\-d\[aq] option enables all debug messages, this option
limits them to the specified modules.
For example, \[aq]\-d \-\-debug\-modules MSR\[aq] will only show debug
messages from the \[aq]MSR\[aq] module.
.TP
\f[B]\-\-version\f[R]
Print the version number and exit.
.TP
\f[B]\-H\f[R] \f[I]HOSTNAME\f[R], \f[B]\-\-host\f[R] \f[I]HOSTNAME\f[R]
Host name or IP address of the target system.
The pepc command will be executed on this system using SSH, instead of
running it locally.
If not specified, the command will be run locally.
.TP
\f[B]\-U\f[R] \f[I]USERNAME\f[R], \f[B]\-\-username\f[R] \f[I]USERNAME\f[R]
Name of the user to use for logging into the remote host over SSH.
The default user name is \[aq]root\[aq].
.TP
\f[B]\-K\f[R] \f[I]PRIVKEY\f[R], \f[B]\-\-priv\-key\f[R] \f[I]PRIVKEY\f[R]
Path to the private SSH key for logging into the remote host.
Defaults to keys in standard paths like \[aq]$HOME/.ssh\[aq].
.TP
\f[B]\-T\f[R] \f[I]TIMEOUT\f[R], \f[B]\-\-timeout\f[R] \f[I]TIMEOUT\f[R]
Timeout for establishing an SSH connection in seconds.
Defaults to 8.
.TP
\f[B]\-D\f[R] \f[I]DATASET\f[R], \f[B]\-\-dataset\f[R] \f[I]DATASET\f[R]
This option is for debugging and testing.
It specifies the dataset to use for emulating the host for running the
command on.
The datasets are available in \[aq]pepc\[aq] source code repository.
.RS
.PP
The argument can be a dataset path or name.
If specified by name, the following locations are searched for the
dataset.
.IP "1." 3
\[aq]./tests/emul\-data\[aq] in the program\[aq]s directory
.IP "2." 3
\[aq]$PEPC_DATA_PATH/tests/emul\-data\[aq]
.IP "3." 3
\[aq]$HOME/.local/share/pepc/tests/emul\-data\[aq]
.IP "4." 3
\[aq]$VIRTUAL_ENV/share/tests/emul\-data\[aq]
.IP "5." 3
\[aq]/usr/local/share/pepc/tests/emul\-data\[aq]
.IP "6." 3
\[aq]/usr/share/pepc/tests/emul\-data\[aq]
.RE
.TP
\f[B]\-\-force\-color\f[R]
Force colorized output even if the output stream is not a terminal (adds
ANSI escape codes).
.TP
\f[B]\-\-print\-man\-path\f[R]
Print path to pepc manual pages directory and exit.
This path can be added to the \[aq]MANPATH\[aq] environment variable to
make the manual pages available to the \[aq]man\[aq] tool.
.TP
\f[B]\-\-override\-cpu\-model\f[R] \f[I]VFM\f[R]
This option is for debugging and testing purposes only.
Override the target host CPU model and force pepc to treat the host as a
specific CPU model.
The format is \[aq][<Vendor>:][<Family>:]<Model>\[aq], where
\[aq]<Vendor>\[aq] is the CPU vendor (e.g., \[aq]GenuineIntel\[aq] or
\[aq]AuthenticAMD\[aq]), \[aq]<Family>\[aq] is the CPU family (e.g., 6),
and \[aq]<Model>\[aq] is the CPU model (e.g., 0x8F).
Example: \[aq]GenuineIntel:6:0x8F\[aq] will force the tool to treat the
target host CPU as a Sapphire Rapids Xeon.
The vendor and family are optional and if not specified, the tool will
use the vendor and family of the target host CPU.
The family and model can be specified in decimal or hexadecimal format.
.SS Target CPU specification options
All subcommands (\f[I]\[aq]info\[aq]\f[R], \f[I]\[aq]config\[aq]\f[R])
support the following target CPU specification options.
.TP
\f[B]\-\-cpus\f[R] \f[I]CPUS\f[R]
The list can include individual CPU numbers and CPU number ranges.
For example, \[aq]1\-4,7,8,10\-12\[aq] would mean CPUs 1 to 4, CPUs 7,
8, and 10 to 12.
Use the special keyword \[aq]all\[aq] to specify all CPUs.
.TP
\f[B]\-\-cores\f[R] \f[I]CORES\f[R]
The list can include individual core numbers and core number ranges.
For example, \[aq]1\-4,7,8,10\-12\[aq] would mean cores 1 to 4, cores 7,
8, and 10 to 12.
Use the special keyword \[aq]all\[aq] to specify all cores.
This option has to be used with the \[aq]\-\-packages\[aq] option,
because core numbers are relative to the package.
.TP
\f[B]\-\-modules\f[R] \f[I]MODULES\f[R]
The list can include individual module numbers and module number ranges.
For example, \[aq]0,2\-5\[aq] would mean module 0 and modules 2, 3, 4,
and 5.
Use the special keyword \[aq]all\[aq] to specify all modules.
Note, unlike core and die numbers, module numbers are absolute.
.TP
\f[B]\-\-dies\f[R] \f[I]DIES\f[R]
The list can include individual die numbers and die number ranges.
For example, \[aq]0\-3,5\[aq] would mean dies 0 to 3, and die 5.
Use the special keyword \[aq]all\[aq] to specify all dies.
On some systems, die numbers are globally unique, while on other systems
they are relative to the package.
In the latter case, this option has to be used with the
\[aq]\-\-packages\[aq] option.
.TP
\f[B]\-\-packages\f[R] \f[I]PACKAGES\f[R]
The list can include individual package numbers and package number
ranges.
For example, \[aq]0,2\-4\[aq] would mean package 0 and packages 2 to 4.
Use the special keyword \[aq]all\[aq] to specify all packages.
.TP
\f[B]\-\-core\-siblings\f[R] \f[I]CORE_SIBLINGS\f[R]
Core siblings are CPUs sharing the same core.
The list can include individual core sibling indices or index ranges.
For example, if a core includes CPUs 3 and 4, index 0 would mean CPU 3
and index 1 would mean CPU 4.
This option can only be used to reference online CPUs, because Linux
does not provide topology information for offline CPUs.
In the example with CPUs 3 and 4, if CPU 3 was offline, then index 0
would mean CPU 4.
.TP
\f[B]\-\-module\-siblings\f[R] \f[I]MODULE_SIBLINGS\f[R]
Module siblings are CPUs sharing the same module.
The list can include individual module sibling indices or index ranges.
For example, if a module includes CPUs 3, 4, 5, and 6, index 0 would
mean CPU 3, index 1 would mean CPU 4, index 2 would mean CPU 5, and
index 3 would mean CPU 6.
This option can only be used to reference online CPUs, because Linux
does not provide topology information for offline CPUs.
In the example with CPUs 3, 4, 5, and 6, if CPU 4 was offline, then
index 1 would mean CPU 5, index 2 would mean CPU 6, and index 3 would be
invalid.
.SS Subcommand \f[I]\[aq]info\[aq]\f[R]
Retrieve CPU P\-states information for specified CPUs.
By default, display all details for all CPUs.
Use target CPU specification options to define a subset of CPUs, cores,
dies, or packages.
.TP
\f[B]\-m\f[R] \f[I]MECHANISMS\f[R], \f[B]\-\-mechanisms\f[R] \f[I]MECHANISMS\f[R]
A comma\-separated list of mechanisms for retrieving information.
Use \[aq]\-\-list\-mechanisms\[aq] to view available mechanisms.
Many options support only one mechanism (e.g., \[aq]sysfs\[aq]), while
others may support multiple (e.g., \[aq]sysfs\[aq] and \[aq]msr\[aq]).
Mechanisms are tried in the specified order.
By default, all mechanisms are allowed, and the most preferred ones are
tried first.
.TP
\f[B]\-\-list\-mechanisms\f[R]
Display available mechanisms for retrieving CPU P\-states information.
.TP
\f[B]\-\-min\-freq\f[R]
Retrieve the minimum CPU frequency from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/cpufreq/scaling_min_freq\[aq].
.TP
\f[B]\-\-max\-freq\f[R]
Retrieve the maximum CPU frequency from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/cpufreq/scaling_max_freq\[aq].
.TP
\f[B]\-\-min\-freq\-limit\f[R]
Retrieve the minimum supported CPU frequency from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/cpufreq/cpuinfo_min_freq\[aq].
.TP
\f[B]\-\-max\-freq\-limit\f[R]
Retrieve the maximum supported CPU frequency from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/cpufreq/cpuinfo_max_freq\[aq].
.TP
\f[B]\-\-hwp\f[R]
Check if hardware power management is enabled.
When enabled, CPUs can scale their frequency automatically without OS
involvement.
Mechanism: \[aq]msr\[aq], reads MSR_PM_ENABLE (0x770), bit 0.
This setting has global scope.
.TP
\f[B]\-\-frequencies\f[R]
List CPU frequencies supported by the Linux kernel for
\[aq]\-\-min\-freq\[aq] and \[aq]\-\-max\-freq\[aq] options.
If
\[aq]/sys/devices/system/cpu/cpufreq/policy<NUMBER>/scaling_available_frequencies\[aq]
is available (usually the case with the \[aq]acpi_cpufreq\[aq] driver),
retrieve the data from there.
Otherwise, in the case of an Intel platform, assume that all frequencies
from \[aq]\-\-min\-freq\-limit\[aq] to \[aq]\-\-max\-freq\-limit\[aq]
are available with a step equal to \[aq]\-\-bus\-clock\[aq].
.TP
\f[B]\-\-base\-freq\f[R]
Retrieve the base CPU frequency from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/cpufreq/base_frequency\[aq].
If the file is unavailable, it falls back to
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/cpufreq/bios_limit\[aq].
.TP
\f[B]\-\-fixed\-base\-freq\f[R]
Retrieve the CPU fixed base frequency from MSR_PLATFORM_INFO (0xCE),
bits 15:8.
.TP
\f[B]\-\-bus\-clock\f[R]
Retrieve the bus clock frequency, one of the CPU\[aq]s reference clocks.
The \[aq]msr\[aq] mechanism reads MSR_FSB_FREQ (0xCD), bits 2:0, for
legacy Intel platforms.
For modern Intel platforms, the \[aq]doc\[aq] mechanism assumes a 100MHz
bus clock.
.TP
\f[B]\-\-turbo\f[R]
Check if turbo is enabled or disabled.
When enabled, CPUs can run at frequencies above the base frequency if
allowed by the OS and thermal conditions.
Reads the sysfs file based on the CPU frequency driver: intel_pstate \-
\[aq]/sys/devices/system/cpu/intel_pstate/no_turbo\[aq], acpi\-cpufreq
\-\[aq]/sys/devices/system/cpu/cpufreq/boost\[aq].
The setting has global scope.
.TP
\f[B]\-\-epp\f[R]
Retrieve EPP (Energy Performance Preference) using \[aq]sysfs\[aq]
(preferred) or \[aq]msr\[aq] mechanisms.
EPP is a hint to the CPU on energy efficiency versus performance.
On Intel CPUs, both \[aq]msr\[aq] and \[aq]sysfs\[aq] mechanisms are
supported with values ranging from 0\-255 (maximum energy efficiency to
maximum performance) or policy names (\[aq]sysfs\[aq] mechanism only).
On AMD CPUs, only \[aq]sysfs\[aq] is supported with policy names only.
The \[aq]sysfs\[aq] mechanism reads
\[aq]/sys/devices/system/cpu/cpufreq/policy<NUMBER>/energy_performance_preference\[aq],
while the \[aq]msr\[aq] mechanism reads MSR_HWP_REQUEST (0x774), bits
31:24.
.TP
\f[B]\-\-epb\f[R]
Retrieve EPB (Energy Performance Bias) using \[aq]sysfs\[aq] (preferred)
or \[aq]msr\[aq] mechanisms.
EPB is a hint to the CPU on energy efficiency versus performance.
The value ranges from 0\-15 (maximum performance to maximum energy
efficiency) or can be a policy name (supported by \[aq]sysfs\[aq] only).
The \[aq]sysfs\[aq] mechanism reads
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/power/energy_perf_bias\[aq],
while the \[aq]msr\[aq] mechanism reads MSR_ENERGY_PERF_BIAS (0x1B0),
bits 3:0.
.TP
\f[B]\-\-driver\f[R]
Retrieve the CPU frequency driver name.
The driver enumerates and manages CPU P\-states on the platform.
The name is read from
\[aq]/sys/devices/system/cpu/cpufreq/policy<NUMBER>/scaling_driver\[aq].
While sysfs provides a per\-CPU API, Intel platforms typically use a
single driver.
.TP
\f[B]\-\-intel\-pstate\-mode\f[R]
Retrieve the \[aq]intel_pstate\[aq] driver mode: \[aq]active\[aq],
\[aq]passive\[aq], or \[aq]off\[aq].
In \[aq]active\[aq] mode, custom \[aq]intel_pstate\[aq] governors are
used.
In \[aq]passive\[aq] mode, generic Linux governors are employed.
The mode is read from
\[aq]/sys/devices/system/cpu/intel_pstate/status\[aq].
.TP
\f[B]\-\-governor\f[R]
Retrieve the CPU frequency governor, which determines the P\-state based
on CPU load and other factors.
The governor name is read from
\[aq]/sys/devices/system/cpu/cpufreq/policy<NUMBER>/scaling_governor\[aq].
.TP
\f[B]\-\-governors\f[R]
Retrieve the list of available CPU frequency governors.
Governors determine the P\-state of a CPU based on its activity and
other factors, each implementing a unique selection policy.
Available governors are listed in
\[aq]/sys/devices/system/cpu/cpufreq/policy<NUMBER>/scaling_available_governors\[aq].
.TP
\f[B]\-\-cppc\-lowest\-perf\f[R]
Retrieve the ACPI CPPC lowest performance level value for specified CPUs
from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/acpi_cppc/lowest_perf\[aq].
.TP
\f[B]\-\-cppc\-lowest\-nonlinear\-perf\f[R]
Retrieve the ACPI CPPC lowest nonlinear performance level value for
specified CPUs from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/acpi_cppc/lowest_nonlinear_perf\[aq].
.TP
\f[B]\-\-cppc\-guaranteed\-perf\f[R]
Retrieve the ACPI CPPC guaranteed performance level value for specified
CPUs from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/acpi_cppc/guaranteed_perf\[aq].
.TP
\f[B]\-\-cppc\-nominal\-perf\f[R]
Retrieve the ACPI CPPC nominal performance level value for specified
CPUs from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/acpi_cppc/nominal_perf\[aq].
.TP
\f[B]\-\-cppc\-highest\-perf\f[R]
Retrieve the ACPI CPPC highest performance level value for specified
CPUs from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/acpi_cppc/highest_perf\[aq].
.TP
\f[B]\-\-cppc\-nominal\-freq\f[R]
Retrieve the ACPI CPPC nominal frequency for specified CPUs from
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/acpi_cppc/nominal_freq\[aq].
.TP
\f[B]\-\-hwp\-lowest\-perf\f[R]
Retrieve the HWP lowest performance level for specified CPUs.
Reads MSR_HWP_CAPABILITIES (0x771), bits 31:24.
.TP
\f[B]\-\-hwp\-efficient\-perf\f[R]
Retrieve the HWP most efficient performance level for specified CPUs.
Reads MSR_HWP_CAPABILITIES (0x771), bits 23:16.
.TP
\f[B]\-\-hwp\-guaranteed\-perf\f[R]
Retrieve the HWP guaranteed performance level for specified CPUs.
Reads MSR_HWP_CAPABILITIES (0x771), bits 15:8.
.TP
\f[B]\-\-hwp\-highest\-perf\f[R]
Retrieve the HWP highest performance level for specified CPUs.
Reads MSR_HWP_CAPABILITIES (0x771), bits 7:0.
.TP
\f[B]\-\-yaml\f[R]
Display output in YAML format.
.SS Subcommand \f[I]\[aq]config\[aq]\f[R]
Configure CPU P\-states for specified CPUs.
If no parameter is provided, the current value(s) will be displayed.
Use target CPU specification options to define the subset of CPUs,
cores, dies, or packages.
.TP
\f[B]\-m\f[R] \f[I]MECHANISMS\f[R], \f[B]\-\-mechanisms\f[R] \f[I]MECHANISMS\f[R]
A comma\-separated list of mechanisms allowed for configuring CPU
P\-states.
Use \[aq]\-\-list\-mechanisms\[aq] to view available mechanisms.
Many options support only one mechanism (e.g., \[aq]sysfs\[aq]), while
some support multiple (e.g., \[aq]sysfs\[aq] and \[aq]msr\[aq]).
Mechanisms are tried in the specified order.
By default, all mechanisms are allowed, and the most preferred ones are
tried first.
.TP
\f[B]\-\-list\-mechanisms\f[R]
Display available mechanisms for configuring CPU P\-states.
.TP
\f[B]\-\-min\-freq\f[R] \f[I][MIN_FREQ]\f[R]
Set the minimum CPU frequency via
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/cpufreq/scaling_min_freq\[aq].
The default unit is \[aq]Hz\[aq], but \[aq]kHz\[aq], \[aq]MHz\[aq], and
\[aq]GHz\[aq] can also be used (for example \[dq]900MHz\[dq]).
.RS
.PP
The following special values can also be used: \f[B]min\f[R] Minimum
frequency supported by the Linux CPU frequency driver (see
\[aq]\-\-min\-freq\-limit\[aq]).
\f[B]max\f[R] Maximum frequency supported by the Linux CPU frequency
driver (see \[aq]\-\-max\-freq\-limit\[aq]).
\f[B]base\f[R], \f[B]hfm\f[R] Base CPU frequency (see
\[aq]\-\-base\-freq\[aq]).
.RE
.TP
\f[B]\-\-max\-freq\f[R] \f[I][MAX_FREQ]\f[R]
Similar to \[aq]\-\-min\-freq\[aq], but sets the maximum CPU frequency
via
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/cpufreq/scaling_max_freq\[aq].
.TP
\f[B]\-\-turbo\f[R] \f[I][on|off]\f[R]
Toggle turbo mode globally via sysfs.
When enabled, CPUs can exceed the base frequency if allowed by the OS
and thermal conditions.
In the case of the \[aq]intel_pstate\[aq] driver, use
\[aq]/sys/devices/system/cpu/intel_pstate/no_turbo\[aq].
In the case of the \[aq]acpi\-cpufreq\[aq] driver, use
\[aq]/sys/devices/system/cpu/cpufreq/boost\[aq].
.TP
\f[B]\-\-epp\f[R] \f[I][EPP]\f[R]
Set EPP (Energy Performance Preference) using \[aq]sysfs\[aq]
(preferred) or \[aq]msr\[aq] mechanisms.
EPP is a hint to the CPU on energy efficiency vs performance.
The value ranges from 0\-255 (maximum energy efficiency to maximum
performance) or can be a policy name (supported by \[aq]sysfs\[aq]
only).
The \[aq]sysfs\[aq] mechanism writes to
\[aq]/sys/devices/system/cpu/cpufreq/policy<NUMBER>/energy_performance_preference\[aq],
while the \[aq]msr\[aq] mechanism writes to MSR_HWP_REQUEST (0x774),
bits 31:24.
.TP
\f[B]\-\-epb\f[R] \f[I][EPB]\f[R]
Set EPB (Energy Performance Bias) using \[aq]sysfs\[aq] (preferred) or
\[aq]msr\[aq] mechanisms.
EPB is a hint to the CPU on energy efficiency versus performance.
The value ranges from 0\-15 (maximum performance to maximum energy
efficiency) or can be a policy name (supported by \[aq]sysfs\[aq] only).
The \[aq]sysfs\[aq] mechanism writes to
\[aq]/sys/devices/system/cpu/cpu<NUMBER>/power/energy_perf_bias\[aq],
while the \[aq]msr\[aq] mechanism writes to MSR_ENERGY_PERF_BIAS
(0x1B0), bits 3:0.
.TP
\f[B]\-\-intel\-pstate\-mode\f[R] \f[I][MODE]\f[R]
Set the \[aq]intel_pstate\[aq] driver mode: \[aq]active\[aq],
\[aq]passive\[aq], or \[aq]off\[aq].
In \[aq]active\[aq] mode, custom \[aq]intel_pstate\[aq] governors are
used.
In \[aq]passive\[aq] mode, generic Linux governors are employed.
Writes to \[aq]/sys/devices/system/cpu/intel_pstate/status\[aq].
.TP
\f[B]\-\-governor\f[R] \f[I][NAME]\f[R]
Set the CPU frequency governor, which determines the P\-state based on
CPU load and other factors.
Writes to
\[aq]/sys/devices/system/cpu/cpufreq/policy<NUMBER>/scaling_governor\[aq].
